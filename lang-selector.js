!function($){console.log('lang-selector script init');if(typeof $=='undefined')return;$(function(){$(document).ready(function(){try{var that=$('#lang-selector'),el,text,new_text;if(that.is('.bfh-languages')||typeof avlLanguages=='undefined')return;that.addClass('bfh-languages');that.addClass('bfh-selectbox');var avlLanguages_s=Object.keys(avlLanguages);avlLanguages_s.splice(avlLanguages_s.indexOf($(that).attr('data-language')),1);that.bfhlanguages({language:$(that).attr('data-language')||'en_US',available:avlLanguages_s.join(',')||'',flags:true});el=that.find('[data-option="zh_CN"]').first();if(el&&el.length>0){text=el.html();new_text=text.replace('(Zhōngwén)','');el.html(new_text);}
el=that.find('[data-option="ru_RU"]').first();if(el&&el.length>0){text=el.html();new_text=text.replace(' язык','');el.html(new_text.replace("р","Р"));}
$('#language').change(function(e){var lang=$(this).val();$.ajax('/langswitch',{data:{lang:lang}}).done(function(){if(typeof ga==undefined){setTimeout(function(){(typeof ga==undefined)?ga('send','event','langswitch','select',lang):void(0);location.reload();},300)}else{ga('send','event','langswitch','select',lang);location.reload();}});});}catch(e){console.warn('lang-selector catch error:',e);}});});}(window.jQuery);